!function e(n,r,t){function i(a,u){if(!r[a]){if(!n[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};n[a][0].call(c.exports,function(e){var r=n[a][1][e];return i(r?r:e)},c,c.exports,e,n,r,t)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<t.length;a++)i(t[a]);return i}({1:[function(e,n,r){"use strict";e("./learnjs.js"),e("./vendor/node-uuid/uuid.js")},{"./learnjs.js":2,"./vendor/node-uuid/uuid.js":4}],2:[function(e,n,r){"use strict";var t={poolId:"eu-central-1:f628cc78-2e40-4d11-82a2-696f8a5b5e30",region:"eu-central-1"};t.identity=new $.Deferred,t.problems=[{description:"What is truth?",code:"function problem() { return __; }",answer:"true"},{description:"Simple Math",code:"function problem() { return 42 === 6 * __; }",answer:"7"},{description:"Q1",code:"function problem() { return _; }",answer:"ans1"}],t.template=function(e){return $(".templates ."+e).clone()},t.applyObject=function(e,n){for(var r in e)n.find('[data-name="'+r+'"]').text(e[r])},t.flashElement=function(e,n){e.fadeOut("fast",function(){e.html(n),e.fadeIn()})},t.buildCorrectFlash=function(e){var n=t.template("correct-flash"),r=n.find("a");return e<t.problems.length?r.attr("href","#problem-"+(e+1)):(r.attr("href",""),r.text("You're Finished!")),n},t.triggerEvent=function(e,n){console.log("triggerevent called, "+e),$(".view-container>*").trigger(e,n)},t.popularAnswers=function(e){return t.identity.then(function(){var n=new AWS.Lambda,r={FunctionName:"learnjs_popularAnswers",Payload:JSON.stringify({problemNumber:e})};return t.sendAwsRequest(n.invoke(r),function(){return t.popularAnswers(e)})})},t.problemView=function(e){function n(){return a.answer.trim()===s.val()}function r(){if(n()){var e=t.buildCorrectFlash(i);t.flashElement(u,e),t.saveAnswer(i,s.val())}else t.flashElement(u,"Incorrect!");return!1}var i=parseInt(e,10),o=t.template("problem-view"),a=t.problems[i-1],u=o.find(".result"),s=o.find(".answer");if(console.log("problemview"),i<t.problems.length){console.log("notlast");var l=t.template("skip-btn");l.find("a").attr("href","#problem-"+(i+1)),$(".nav-list").append(l),o.bind("removingView",function(){console.log("removingView evt, this="+this),l.remove()})}return t.fetchAnswer(i).then(function(e){e.Item&&s.val(e.Item.answer)}),o.find(".check-btn").click(r),o.find(".title").text("Problem #"+i),t.applyObject(a,o),o},t.wordView=function(){return t.template("word-view")},t.landingView=function(){return t.template("landing-view")},t.profileView=function(){var e=t.template("profile-view");return t.identity.done(function(n){e.find(".email").text(n.email)}),e},t.showView=function(e){var n={"#problem":t.problemView,"#profile":t.profileView,"#words":t.wordView,"#":t.landingView,"":t.landingView},r=e.split("-"),i=n[r[0]];t.triggerEvent("removingView",[]),i?(console.log("applying route: "+r[0]),$(".view-container").empty().append(i(r[1]))):(console.log("unknown route: "+r[0]),console.log("routes: "+Object.keys(n)))},t.addProfileLink=function(e){var n=t.template("profile-link");n.find("a").text(e.email),$(".signin-bar").prepend(n)},t.readURL=function(e){if(e.files&&e.files[0]){var n=new FileReader;n.onload=function(e){$(".blah:first").attr("src",e.target.result),window.imgresult=e.target.result},n.readAsDataURL(e.files[0])}},t.appOnReady=function(){window.onhashchange=function(){t.showView(window.location.hash)},t.showView(window.location.hash),t.identity.done(t.addProfileLink),$("#imgInp").change(function(){console.log("onchange"),t.readURL(this)})},t.awsRefresh=function(){var e=new $.Deferred;return AWS.config.credentials.refresh(function(n){n?e.reject(n):e.resolve(AWS.config.credentials.identityId)}),e.promise()},t.sendAwsRequest=function(e,n){var r=$.Deferred();return e.on("error",function(e){"CredentialsError"===e.code?t.identity.then(function(e){return e.refresh().then(function(){return n()},function(){r.reject(resp)})}):r.reject(e)}),e.on("success",function(e){r.resolve(e.data)}),e.send(),r},t.saveData=function(e,n){return t.identity.then(function(e){var r=(new AWS.S3({region:t.region}),"item.data");({Body:n,Bucket:r,Key:uuid.v4(),ACL:"public-read",ContentLength:n.length(),ContentEncoding:"base64"})})},t.saveAnswer=function(e,n){return t.identity.then(function(r){var i=new AWS.DynamoDB.DocumentClient,o={TableName:"learnjs",Item:{userId:r.id,problemId:e,answer:n}};return t.sendAwsRequest(i.put(o),function(){return t.saveAnswer(e,n)})})},t.fetchAnswer=function(e){return t.identity.then(function(n){var r=new AWS.DynamoDB.DocumentClient,i={TableName:"learnjs",Key:{userId:n.id,problemId:e}};return t.sendAwsRequest(r.get(i),function(){return t.fetchAnswer(e)})})},n.exports=t},{}],3:[function(e,n,r){(function(e){"use strict";var r,t=e.crypto||e.msCrypto;if(t&&t.getRandomValues){var i=new Uint8Array(16);r=function(){return t.getRandomValues(i),i}}if(!r){var o=new Array(16);r=function(){for(var e,n=0;n<16;n++)0===(3&n)&&(e=4294967296*Math.random()),o[n]=e>>>((3&n)<<3)&255;return o}}n.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,n,r){"use strict";function t(e,n){var r=n||0,t=u;return t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]}function i(e,n,r){var i=n&&r||0,o=n||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:d,u=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:w+1,l=u-p+(s-w)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||u>p)&&void 0===e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=u,w=s,d=a,u+=122192928e5;var c=(1e4*(268435455&u)+s)%4294967296;o[i++]=c>>>24&255,o[i++]=c>>>16&255,o[i++]=c>>>8&255,o[i++]=255&c;var v=u/4294967296*1e4&268435455;o[i++]=v>>>8&255,o[i++]=255&v,o[i++]=v>>>24&15|16,o[i++]=v>>>16&255,o[i++]=a>>>8|128,o[i++]=255&a;for(var m=e.node||f,g=0;g<6;++g)o[i+g]=m[g];return n?n:t(o)}function o(e,n,r){var i=n&&r||0;"string"==typeof e&&(n="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var u=0;u<16;++u)n[i+u]=o[u];return n||t(o)}for(var a=e("./lib/rng"),u=[],s={},l=0;l<256;++l)u[l]=(l+256).toString(16).substr(1),s[u[l]]=l;var c=a(),f=[1|c[0],c[1],c[2],c[3],c[4],c[5]],d=16383&(c[6]<<8|c[7]),p=0,w=0,v=o;v.v1=i,v.v4=o,n.exports=v},{"./lib/rng":3}]},{},[1]);